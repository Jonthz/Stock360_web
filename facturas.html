<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock360 | Generador de Facturas de Picking</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    <style>
        body {
            background-color: #f4f4f4;
            padding: 20px;
            font-family: sans-serif;
        }

        .invoice-card {
            background: white;
            width: 210mm;
            min-height: 148mm;
            padding: 20px;
            margin: 0 auto 30px auto;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-top: 5px solid #FFB300;
            position: relative;
        }

        .barcode-container {
            text-align: right;
        }

        .item-table th {
            background: #f8f9fa;
        }

        .print-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            padding: 15px 30px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }

            .print-btn,
            .sidebar-info {
                display: none;
            }

            .invoice-card {
                box-shadow: none;
                margin: 0;
                page-break-after: always;
                border: 1px solid #eee;
            }
        }

        .header-logo {
            font-weight: 800;
            color: #121212;
            letter-spacing: -1px;
        }

        .header-logo span {
            color: #FFB300;
        }
    </style>
</head>

<body>

    <button class="btn btn-dark print-btn" onclick="window.print()">
        <i class="bi bi-printer me-2"></i> IMPRIMIR FACTURAS DE DEMO
    </button>

    <div class="container mb-4 sidebar-info">
        <div class="alert alert-warning shadow-sm">
            <strong>游눠 Tip de Demo:</strong> Imprime estas "facturas" o 치brelas en tu tablet/m칩vil secundario.
            Apunta con la app <strong>Stock360</strong> al c칩digo de barras superior para iniciar el proceso
            autom치ticamente.
        </div>
    </div>

    <div id="invoices-container">
        <!-- Invoiced will be generated here -->
    </div>

    <script>
        const orders = [
            {
                id: "ORD-001",
                client: "Almacenes ABC",
                date: new Date().toLocaleDateString(),
                items: [
                    { name: "Tornillos M8 x 20mm", sku: "TOR-M8-20", qty: 15, location: "A-12" },
                    { name: "Tuercas M8", sku: "TUE-M8", qty: 20, location: "A-14" }
                ]
            },
            {
                id: "ORD-002",
                client: "Distribuidora XYZ",
                date: new Date().toLocaleDateString(),
                items: [
                    { name: "Clavos 2 pulgadas", sku: "CLA-2P", qty: 100, location: "A-05" },
                    { name: "Clavos 3 pulgadas", sku: "CLA-3P", qty: 75, location: "A-06" },
                    { name: "Grapas Industriales", sku: "GRA-IND", qty: 40, location: "B-11" }
                ]
            }
        ];

        function generateInvoices() {
            const container = document.getElementById('invoices-container');

            orders.forEach(order => {
                const card = document.createElement('div');
                card.className = 'invoice-card';

                card.innerHTML = `
                    <div class="row align-items-center mb-4">
                        <div class="col-6">
                            <h2 class="header-logo">STOCK<span>360</span></h2>
                            <p class="text-muted small mb-0">Operaciones de Bodega Avanzadas</p>
                        </div>
                        <div class="col-6 barcode-container">
                            <svg id="barcode-${order.id}"></svg>
                        </div>
                    </div>

                    <div class="row mb-4 border-bottom pb-3">
                        <div class="col-7">
                            <p class="mb-0 text-muted small text-uppercase fw-bold">CLIENTE / DESTINATARIO</p>
                            <h4 class="fw-bold">${order.client}</h4>
                            <p class="text-muted small">ID de Sistema: ${Math.floor(Math.random() * 100000)}</p>
                        </div>
                        <div class="col-5 text-end">
                            <p class="mb-0 text-muted small text-uppercase fw-bold">FECHA DE EMISI칍N</p>
                            <p class="fw-bold">${order.date}</p>
                            <p class="mb-0 text-muted small text-uppercase fw-bold">DOCUMENTO</p>
                            <p class="text-primary fw-bold">ORDEN DE PICKING #${order.id.split('-')[1]}</p>
                        </div>
                    </div>

                    <table class="table item-table table-bordered">
                        <thead>
                            <tr>
                                <th>C칍DIGO / SKU</th>
                                <th>DESCRIPCI칍N DEL PRODUCTO</th>
                                <th class="text-center">UBICACI칍N</th>
                                <th class="text-center">CANT.</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${order.items.map(item => `
                                <tr>
                                    <td class="small fw-bold">${item.sku}</td>
                                    <td>${item.name}</td>
                                    <td class="text-center text-primary fw-bold">${item.location}</td>
                                    <td class="text-center fw-bold">${item.qty} u.</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>

                    <div class="mt-5 pt-4 border-top">
                        <div class="row">
                            <div class="col-6">
                                <p class="small text-muted mb-0 italic">Este documento es una orden de trabajo interna para la terminal m칩vil STOCK360.</p>
                            </div>
                            <div class="col-6 text-end">
                                <p class="small fw-bold">TOTAL ITEMS: ${order.items.length}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div style="position: absolute; bottom: 20px; right: 20px; opacity: 0.2;">
                         <small>STOCK360-MVP-PRINT-ENGINE</small>
                    </div>
                `;

                container.appendChild(card);

                // Generate Barcode
                JsBarcode(`#barcode-${order.id}`, order.id, {
                    format: "CODE128",
                    width: 2,
                    height: 50,
                    displayValue: true,
                    lineColor: "#121212"
                });
            });
        }

        document.addEventListener('DOMContentLoaded', generateInvoices);
    </script>
</body>

</html>